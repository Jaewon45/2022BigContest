# Read me V2

(개인적으로 정리하려고 지원님이 올려주신 정리본에 내용 조금 더 추가해봤습니다!)

# 앱 사용성 데이터를 통한 대출신청 예측 분석

**2022 빅콘테스트 데이터분석 분야 퓨처스 리그**

2022.08.30~2022.10.14

[빅콘테스트 홈페이지 바로가기](https://www.bigcontest.or.kr/main.php)

---

# 💡 프로젝트 상세

### 팀 소개

- 신재원 [jwoneeeee@ewhain.net](mailto:jwoneeeee@ewhain.net)
- 이지원 [jiddoly@gmail.com](mailto:jiddoly@gmail.com)

- 최주희 [lovejoohero@gmail.com](mailto:lovejoohero@gmail.com)
- 최지원 [jiii111@ewhain.net](mailto:jiii111@ewhain.net)

---

## 1️⃣ 분석주제 및 방향

### 대출 비교 플랫폼, Finda 분석

: 금융 **정보 불균형 문제**를 해소하여, **현명하고 주체적인 금융 선택**을 돕는 기업

- **주요 기능**
    - 고객의 소득, 재직, 신용점수 등을 60여개 제휴사의 신용평가모델에 적용하여 조건에 맞는 대출상품 비교 및 신청 서비스 제공
    - 신용점수 및 상환플랜 등 대출 통합 관리 서비스 제공
- **주요 고객**
    - 금리 상승기 이자 부담으로 인한 **대출 비교 플랫폼에 대한 니즈**를 느끼는 사용자
    - 양극화된 대출시장에서 **중금리 대출 상품의 부재**를 느끼는 중간 신용자

### 분석 과제 분석

: Finda가 빅데이터를 기반으로 고객별 니즈를 고려한 **맞춤형 서비스**를 제공하도록 인사이트를 도출하는 것

1. **분류 과제**
    - Finda 홈 화면 진입 고객 중, 특정 기간에 **대출을 신청할 고객 예측**
2. **군집화 과제**
    - Finda 홈 화면 진입 고객들을 군집화하여 **군집 별 특성 분석**을 통한 **맞춤형 서비스 메시지 제안**

---

## 2️⃣ 활용데이터

![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled.png)

- **제공 데이터**: 유저 스펙 테이블, 대출 결과 테이블, 유저 로그 데이터
- **외부 데이터**: 대출 금리 데이터, 경제 심리 지수 데이터, 한국은행 기준 금리 데이터

---

## 3️⃣ 데이터 클렌징

### 1. 이상치 처리

- 각 Feature를 boxplot으로 시각화 한 후, 분포 상 극단적인 이상치가 존재하는 경우 **평균값 대체 또는 삭제** 진행

### 2. 결측치 처리

1. 동일 유저 ID 기준으로 처리
2. **논리 • 인과적 추론**을 통한 처리
3. **다중 대체법(MICE)**을 통한 처리

![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%201.png)

---

## 4️⃣ 모델링1 : 분류

### 파생변수

**대출 승인 변수**

- 신청서별 **평균 금리**
- 신청서별 **평균 승인한도**

**부채 수준 변수**

- **실제 대출 원금**
- 총 지불 **원리금**
- 총 **예상** 부채

**외부 파생변수**

- 경제심리지수, 소비자동향지수
- 한국은행 공시 **기준 금리**
- 대출 **상품 유형별 대출 금리** 데이터

![유저 스펙과 부채 관련 파생변수 상세](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%202.png)

유저 스펙과 부채 관련 파생변수 상세

### 전처리

- **수치형 변수** : 로그변환, Robust Scaling, Min-Max Scaling
- **범주형 변수**(모델 특성에 맞게 처리): 수치형 score 파생변수, 수치형 label화, 원핫인코딩, 라벨인코딩
- **Sampling** : **1000만 행이 넘는 불균형 데이터**
    - Validation set 분리 후, 남은 train set과 test set의 대출 신청 비율을 유지하며 **언더샘플링 진행**
    - 언더 샘플링을 통해 데이터 불균형 비율이 17.5:1에서 5.8:1로 완화
    
    ![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%203.png)
    

### 모델링

1. 교차검증을 통해 트리기반 모델, 선형 모델, 신경망 모델 등의 **성능을 전반적으로 확인**
    - **트리 기반 모델( XGBoost, Catboost, lightGBM, AdaBoost)**과 **인공 신경망 모델(Elliptic)**이 괜찮은 성능을 보임

![선형 및 인공 신경망 모델](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%204.png)

선형 및 인공 신경망 모델

![트리 기반 모델의 성능](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%205.png)

트리 기반 모델의 성능

1. 성능이 좋은 5개 모델의 **하이퍼파라미터 튜닝** 
    - 모든 모델에서 비슷한 **변수 중요도** 결과가 확인됨
        - 유저 고유 ID를 제외하면, **대출 승인 금리, 신용점수, 대출 승인 한도, 금융사 점수(파생변수)** 등이 높은 변수 중요도를 보임
        
        ![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%206.png)
        
2. Stacking 기법과 soft voting 기법을 활용하여 튜닝된 5개의 모델의 **앙상블 모델 생성**

![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%207.png)

![앙상블 모델 구조](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%208.png)

앙상블 모델 구조

1. 앙상블 모델과 개별모델의 성능을 비교하여 **가장 좋은 모델 채택**
    - **Elliptic Envelope 단독 모델이 가장 높은 성능을 보임**

![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%209.png)

- **Elliptic Envelope 모델**
    
    : 이상치 탐지 알고리즘으로 데이터가 가우시안 분포를 따른다고 가정할 때, 타원 분포를 벗어나는 샘플을 이상치로 분류
    

---

## 5️⃣ 모델링2 : 군집화

### 파생변수

**행동군집화**

- 대출신청유무
- 기대출보유유무
- 이탈지수
- 총 방문일 수
- 최근성
- 전체 이벤트 중 주요 이벤트 차지 비율

**고객군집화**

- 고객기존정보 : 나잇대, 근로형태, 고용형태, 주거소유형태
- 부채 수준 : 기대출수, 개인회생자, 신용점수, 연소득
- 희망 대출조건 : 목적, 대출희망금액
- 승인 대출조건 : 평균 승인한도, 평균 금리, 총 신청서 수

![유저 로그 데이터 관련 파생변수 상세](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%2010.png)

유저 로그 데이터 관련 파생변수 상세

### 전처리

- 고객별 로그 통계량 기준 **Q1 이하의 로그 개수를 가진 유저 삭제**
- 로그가 유실되었다고 판단된 **유저 삭제**
- **수치형 변수**: 로그 변환, Min-Max Scaling 진행
- **범주형 변수**: 라벨 인코딩 진행

### 모델링

1. **행동군집화**
    - 대출, 로그, Event 관련 변수를 통해 고객의 행동을 기반으로 한 군집화
    - 사용한 모델 : **BIRCH 모델**
    
    ![행동군집화 군집 분석 결과](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%2011.png)
    
    행동군집화 군집 분석 결과
    
2. **고객군집화**
    - 고객기본정보, 부채 수준, 대출조건 관련 변수를 통해 고객의 특성을 기반으로 한 군집화
    - 사용한 모델 : **Gaussian Mixture Model**
    
    ![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%2012.png)
    

### 서비스 제안 - [핀다 앱 진입 화면 서비스 메세지 제안]

![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%2013.png)

![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%2014.png)

![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%2015.png)

![Untitled](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/Untitled%2016.png)

![왼쪽부터 순서대로 잠재고객군, 취소위험/신규고객군, 이탈고객군, 충성고객군](Read%20me%20V2%20115a04ec6eba4f9990338c87b2e7f0d6/%25EC%2584%259C%25EB%25B9%2584%25EC%258A%25A4%25EC%25A0%259C%25EC%2595%2588.jpg)

왼쪽부터 순서대로 잠재고객군, 취소위험/신규고객군, 이탈고객군, 충성고객군

---

## 6️⃣ 활용방안 및 기대효과

- 다수의 제휴사 및 고객에 대한 빅데이터를 기반으로 **고객별 니즈를 고려한 맞춤형 서비스 제공**
- **금융시장의 불균형과 비효율적 구조를 개선**하고자 하는 기업의 방향성 실현